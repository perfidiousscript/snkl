/*! snkl 2015-11-30 */
snklApp.controller("AboutController",["$scope",function(a){console.log("This works"),a.thing={text:"About Controller works!"}}]),snklApp.controller("AddController",["$scope",function(a){console.log("This works"),a.thing={text:"Add Controller works!"}}]),snklApp.controller("ContactController",["$scope",function(a){console.log("This works"),a.thing={text:"Contact Controller works!"}}]),snklApp.controller("MainController",["$scope","$http",function(a,b){a.connectionTypeScale=d3.scale.ordinal().domain(1,2,3).range("red","green","blue"),a.dataArray=[],b({method:"GET",url:"data/populate"}).success(function(b){a.populateGraph(b)}),a.populateGraph=function(c){var d=d3.select(".showData").append("svg"),e=d3.scale.linear().domain([1915,2015]).range([0,900]),f=d3.scale.linear().domain([0,100]).range([0,900]),g=d3.scale.linear().domain([0,100]).range([0,500]);d.attr("width",900),d.attr("height",500);var h,i=d.selectAll("g").data(c).enter().append("g");i.append("rect").attr("class","author").attr("id",function(a){return"'"+a.id+"'"}).attr("width",function(a){return f(a.last_work-a.first_work)}).attr("height",20).attr("x",function(a){return e((a.last_work-a.first_work)/2+a.first_work)}).attr("y",function(a){return g(a.style)}),i.append("text").attr("x",function(a){return e((a.last_work-a.first_work)/2+a.first_work)}).attr("y",function(a){return g(a.style+3)}).style("fill","white").text(function(a){return a.author_name}),i.on("click",function(c,d){null!=h&&d3.select(h).select("rect").attr("class","null"),h=this,d3.select(h).select("rect").attr("class","selected"),b({method:"POST",url:"data/connections",data:c}).success(function(b){a.connections(b)})}),a.connections=function(a){for(var b=d3.select("svg").selectAll("rect"),c=0;c<a.length;c++)console.log("Here is authArray",a),i.append("line").attr("x1",b.filter(function(b){return b.id==a[c].author_1}).attr("x")).attr("y1",b.filter(function(b){return b.id==a[c].author_1}).attr("y")).attr("x2",b.filter(function(b){return b.id==a[c].author_2}).attr("x")).attr("y2",b.filter(function(b){return b.id==a[c].author_2}).attr("y"))}}}]);